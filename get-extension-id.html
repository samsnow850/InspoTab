<!DOCTYPE html>
<html>
<head>
    <title>Get Extension ID</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; }
        .info-box { background: #f0f8ff; border: 1px solid #ccc; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .error-box { background: #ffe6e6; border: 1px solid #ff9999; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .success-box { background: #e6ffe6; border: 1px solid #99ff99; padding: 15px; margin: 10px 0; border-radius: 5px; }
        code { background: #f5f5f5; padding: 2px 4px; border-radius: 3px; }
        .copy-btn { background: #007bff; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; margin-left: 10px; }
        .copy-btn:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>InspoTab Extension ID & OAuth Setup</h1>
    
    <div class="info-box">
        <h3>üìã Your Extension Information</h3>
        <p><strong>Extension ID:</strong> <code id="extension-id">Loading...</code> <button class="copy-btn" onclick="copyToClipboard('extension-id')">Copy</button></p>
        <p><strong>Extension Name:</strong> <code id="extension-name">Loading...</code></p>
        <p><strong>Extension Version:</strong> <code id="extension-version">Loading...</code></p>
    </div>

    <div class="info-box">
        <h3>üîß OAuth Configuration</h3>
        <p><strong>Client ID:</strong> <code id="client-id">Loading...</code> <button class="copy-btn" onclick="copyToClipboard('client-id')">Copy</button></p>
        <p><strong>Scopes:</strong> <code id="scopes">Loading...</code></p>
    </div>

    <div class="info-box">
        <h3>üìù Google Cloud Console Setup Instructions</h3>
        <ol>
            <li>Go to <a href="https://console.cloud.google.com/" target="_blank">Google Cloud Console</a></li>
            <li>Select your project</li>
            <li>Go to "APIs & Services" ‚Üí "Credentials"</li>
            <li>Find your OAuth 2.0 Client ID or create a new one</li>
            <li>Set <strong>Application type</strong> to "Chrome Extension"</li>
            <li>Set <strong>Extension ID</strong> to: <code id="extension-id-copy">Loading...</code></li>
            <li>Make sure the <strong>Client ID</strong> matches: <code id="client-id-copy">Loading...</code></li>
        </ol>
    </div>

    <div class="info-box">
        <h3>üîç Verification Checklist</h3>
        <ul>

            <li>‚úÖ OAuth client is configured for Chrome Extension</li>
            <li>‚úÖ Extension ID matches in Google Cloud Console</li>
            <li>‚úÖ Client ID matches in manifest.json</li>
            <li>‚úÖ Your Google account is added as a test user (if app is in testing)</li>
        </ul>
    </div>

    <div class="info-box">
        <h3>üöÄ Test OAuth Connection</h3>
        <button onclick="testOAuth()" style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">Test OAuth Connection</button>
        <div id="oauth-result" style="margin-top: 10px;"></div>
    </div>

    <script>
        // Get extension information
        const manifest = chrome.runtime.getManifest();
        const extensionId = chrome.runtime.id;
        
        // Display extension info
        document.getElementById('extension-id').textContent = extensionId;
        document.getElementById('extension-name').textContent = manifest.name;
        document.getElementById('extension-version').textContent = manifest.version;
        document.getElementById('extension-id-copy').textContent = extensionId;
        
        // Display OAuth info
        if (manifest.oauth2) {
            document.getElementById('client-id').textContent = manifest.oauth2.client_id;
            document.getElementById('scopes').textContent = manifest.oauth2.scopes.join(', ');
            document.getElementById('client-id-copy').textContent = manifest.oauth2.client_id;
        } else {
            document.getElementById('client-id').textContent = 'Not configured';
            document.getElementById('scopes').textContent = 'Not configured';
            document.getElementById('client-id-copy').textContent = 'Not configured';
        }

        function copyToClipboard(elementId) {
            const text = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(text).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 1000);
            });
        }

        function testOAuth() {
            const resultDiv = document.getElementById('oauth-result');
            resultDiv.innerHTML = '<p>Testing OAuth connection...</p>';
            
            chrome.runtime.sendMessage({ action: 'getAuthToken' }, (response) => {
                if (chrome.runtime.lastError) {
                    resultDiv.innerHTML = `<div class="error-box">‚ùå Error: ${chrome.runtime.lastError.message}</div>`;
                    return;
                }
                
                if (response.error) {
                    resultDiv.innerHTML = `<div class="error-box">‚ùå OAuth Error: ${response.error}</div>`;
                } else if (response.token) {
                    resultDiv.innerHTML = `<div class="success-box">‚úÖ OAuth successful! Token received.</div>`;
                } else {
                    resultDiv.innerHTML = `<div class="error-box">‚ùå No token received</div>`;
                }
            });
        }
    </script>
</body>
</html> 