<!DOCTYPE html>
<html>
<head>
    <title>InspoTab OAuth Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        button { padding: 10px 20px; margin: 5px; }
        .log { background: #f5f5f5; padding: 10px; margin: 10px 0; font-family: monospace; }
    </style>
</head>
<body>
    <h1>InspoTab OAuth Test</h1>
    
    <div class="test-section">
        <h3>1. Check Extension Manifest</h3>
        <button onclick="checkManifest()">Check Manifest</button>
        <div id="manifest-log" class="log"></div>
    </div>
    
    <div class="test-section">
        <h3>2. Test OAuth Token Request</h3>
        <button onclick="testOAuth()">Test OAuth</button>
        <div id="oauth-log" class="log"></div>
    </div>
    


    <script>
        function log(elementId, message) {
            const element = document.getElementById(elementId);
            const timestamp = new Date().toLocaleTimeString();
            element.innerHTML += `[${timestamp}] ${message}\n`;
            element.scrollTop = element.scrollHeight;
        }

        function checkManifest() {
            const manifest = chrome.runtime.getManifest();
            log('manifest-log', 'Manifest loaded:');
            log('manifest-log', JSON.stringify(manifest, null, 2));
            
            if (manifest.oauth2) {
                log('manifest-log', '✅ OAuth2 configuration found');
                log('manifest-log', `Client ID: ${manifest.oauth2.client_id}`);
                log('manifest-log', `Scopes: ${manifest.oauth2.scopes.join(', ')}`);
            } else {
                log('manifest-log', '❌ No OAuth2 configuration found');
            }
        }

        function testOAuth() {
            log('oauth-log', 'Testing OAuth token request...');
            
            chrome.runtime.sendMessage({ action: 'getAuthToken' }, (response) => {
                if (chrome.runtime.lastError) {
                    log('oauth-log', `❌ Message error: ${chrome.runtime.lastError.message}`);
                    return;
                }
                
                if (response.error) {
                    log('oauth-log', `❌ OAuth error: ${response.error}`);
                } else if (response.token) {
                    log('oauth-log', '✅ OAuth token received successfully');
                    log('oauth-log', `Token: ${response.token.substring(0, 20)}...`);
                } else {
                    log('oauth-log', '❌ No token received');
                }
            });
        }


    </script>
</body>
</html> 